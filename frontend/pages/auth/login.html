<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        body {
            background: linear-gradient(135deg, #6a11cb, #2575fc);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', sans-serif;
        }
        .card {
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            padding: 40px;
            width: 100%;
            max-width: 400px;
            background: #fff;
            transition: background 0.5s ease;
        }
        .login-header {
            font-weight: 700;
            color: #333;
        }
        .toggle-btns {
            display: flex;
            margin-bottom: 30px;
            border-radius: 50px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .toggle-btns button {
            flex: 1;
            padding: 12px 0;
            border: none;
            background: #f0f0f0;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
        }
        .toggle-btns button.active {
            background: #6a11cb;
            color: #fff;
        }
        .form-floating > .form-control:focus {
            border-color: #6a11cb;
            box-shadow: 0 0 0 0.2rem rgba(106,17,203,.25);
        }
        .btn-primary {
            background: #6a11cb;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s;
        }
        .btn-primary:hover {
            background: #5b0eb8;
        }
        a {
            color: #6a11cb;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

<div class="card" id="loginCard">
    <h3 class="text-center login-header mb-4">Login</h3>

    <!-- Toggle Buttons for User/Admin with Icons -->
    <div class="toggle-btns mb-4">
        <button id="userBtn" class="active" onclick="setLoginType('user')">
            <i class="fa fa-user"></i> User
        </button>
        <button id="adminBtn" onclick="setLoginType('admin')">
            <i class="fa fa-shield-alt"></i> Admin
        </button>
    </div>

    <!-- Login Form with Floating Labels -->
    <div>
        <div class="form-floating mb-3">
            <input type="email" class="form-control" id="email" placeholder="Email">
            <label for="email">Email</label>
        </div>
        <div class="form-floating mb-3">
            <input type="password" class="form-control" id="password" placeholder="Password">
            <label for="password">Password</label>
        </div>

        <button class="btn btn-primary w-100 mb-3" onclick="login()">Login</button>

        <div class="text-center mb-2">
            <a href="forgot-password.html">Forgot Password?</a>
        </div>

        <hr>

        <div class="text-center">
            <span>Donâ€™t have an account?</span><br>
            <a href="register.html">Create Account</a>
        </div>
    </div>
</div>

<script>
let loginType = 'user'; // default

function setLoginType(type) {
    loginType = type;
    document.getElementById('userBtn').classList.remove('active');
    document.getElementById('adminBtn').classList.remove('active');

    const card = document.getElementById('loginCard');

    if(type === 'user') {
        document.getElementById('userBtn').classList.add('active');
        card.style.background = '#ffffff';
    } else {
        document.getElementById('adminBtn').classList.add('active');
        card.style.background = 'linear-gradient(135deg, #ffe6e6, #ffcccc)';
    }
}

function login() {
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    fetch('/api/auth/login', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({email, password, role: loginType})
    })
    .then(res => res.json())
    .then(data => {
        if(data.success) {
            window.location.href = data.redirectUrl; // redirect to dashboard
        } else {
            alert(data.message); // show error
        }
    })
    .catch(err => console.error(err));
}
</script>


</body>
</html>
